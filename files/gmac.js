var placeSearch,autocomplete,$addressInput,$cityInput,$provinceInput,$postalInput,checkFlag=!0,componentForm={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",postal_code:"short_name"},checkExist=setInterval(function(){$('input[name="street"]').length?checkFlag&&(initAutocomplete(),checkFlag=!1):checkFlag=!0},100);function initAutocomplete(){$addressInput=$('input[name="street"]'),$cityInput=$('input[name="city"]'),$provinceInput=$('select[name="province"]'),$postalInput=$('input[name="postal_code"]'),(autocomplete=new google.maps.places.Autocomplete(document.getElementById("gm-autocomplete"),{types:["address"]})).setComponentRestrictions({country:["ca"]}),autocomplete.setFields(["address_component"]),autocomplete.addListener("place_changed",fillInAddress)}function fillInAddress(){for(var e,t,o=autocomplete.getPlace(),n=0;n<o.address_components.length;n++){var a=o.address_components[n].types[0];if(componentForm[a]){var c=o.address_components[n][componentForm[a]];switch(a){case"street_number":e=c;break;case"route":t=c;break;case"locality":autoCompleteEvent($cityInput,c);break;case"administrative_area_level_1":$provinceInput.val(c).change(),console.log(c);break;case"postal_code":autoCompleteEvent($postalInput,c)}}}autoCompleteEvent($addressInput,e+" "+t);var s=$addressInput.val()+", "+$cityInput.val()+", "+$provinceInput.val()+", "+$postalInput.val();$("#autocomplete").val(s)}function geolocate(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude},e=new google.maps.Circle({center:t,radius:e.coords.accuracy});autocomplete.setBounds(e.getBounds())})}function autoCompleteEvent(e,t){e.val(t),e.trigger("input")}